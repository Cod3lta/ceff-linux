# 2.2.2.E Navigation et commandes de base
---

## Exercice 1 - Connexion en FTP
Dans les prÃ©cÃ©dents exercices, nous avions vu comment se connecter Ã  notre machine en utilisant le protocole SSH. Ici, nous allons utiliser le protocole FTP.

Comme pour la connexion SSH, il faut faire suivre quelques petits points pour y arriver :

1. Installez sur votre serveur le paquet `vsftpd` (toujours avec `apt`).
> â¡ï¸ "vsftpd", oÃ¹ "very secure ftp daemon", est un petit paquet servant de serveur FTP.


2. Autorisez la connexion avec le protocole `ftp`  dans le par-feu de votre serveur Ubuntu en tapant la commande `sudo ufw allow ftp`.


3. Connectez-vous en FTP avec le logiciel FileZilla ou WinSCP. Utilisez la mÃªme adresse IP qu'auparavant. (celle trouvÃ©e avec la commande `ifconfig`)  
   Votre interface de connexion (ici avec FileZilla) devrait ressembler Ã  Ã§a : 
   ![](https://i.imgur.com/di3xWm4.png)

---

## Exercice 2 - Monter les disques de l'Ã©cole
Comme sur votre machine Windows, il est possible de monter les disques du rÃ©seau de l'Ã©cole.

#### Ã‰tape 0 -- NE PAS FAIRE !!
DÃ©finissez dans les paramÃ¨tres rÃ©seaux de votre machine virtuelle sous  VMware une connexion en mode **NAT**. RedÃ©marrez ensuite votre machine ubuntu en tapant la commande `reboot`.
> ğŸš¨ Le mode **NAT** n'est nÃ©cessaire que pour cet exercice.

#### Ã‰tape 1
Commencez par reproduire l'architecture de dossiers suivante dans le dossier utilisateur de votre serveur Linux.
```
ğŸ“ /home
	ğŸ“ /cp-21xxx        <-- ceci est le dossier utilisateur
		ğŸ“ ceff
			ğŸ“„ mount.sh
			ğŸ“„ credentials.cifs
			ğŸ“ privUSR
			ğŸ“ formation
			ğŸ“ partage
```
Utilisez pour Ã§a les commandes apprises auparavant.

> ğŸ’¡ Rappel : le dossier utilisateur est celui indiquÃ© par le symbÃ´le `~`. Vous pouvez y accÃ©der avec la commande `cd`.


#### Ã‰tape 2
Utilisez la commande `nano` pour Ã©crire dans le fichier `mount.sh` le contenu suivant : 
```shell

sudo mount -t cifs //cervin.intra.ceff.ch/PrivUSR/CP-21XXX /home/cp-21xxx/ceff/privUSR -o credentials=/home/cp-21xxx/ceff/credentials.cifs

sudo mount -t cifs //cervin.intra.ceff.ch/formation /home/cp-21xxx/ceff/formation -o credentials=/home/cp-21xxx/ceff/credentials.cifs

sudo mount -t cifs //cervin.intra.ceff.ch/partage /home/cp-21xxx/partage -o credentials=/home/cp-21xxx/ceff/credentials.cifs
```

> ğŸ“Œ VÃ©rifiez dans les paramÃ¨tres de VMware pour activer le copier-coller entre la machine virtuelle et l'hÃ´te Windows. Si besoin, installez le paquet `open-vm-tools`

Faites attention Ã  remplacer **tous les `username`  par votre nom d'utilisateur de session Ubuntu**.

> ğŸ’¡ Pour vous rappeler de votre nom d'utilisateur, utilisez la commande `whoami`


#### Ã‰tape 3
De la mÃªme maniÃ¨re que le point 2, Ã©crivez dans le fichier `credentials.cifs` le texte suivant :
```shell
username=CP-21XXX
# password=Monbar0nLeBest
```

> ğŸš¨ **N'Ã©crivez pas votre vrai mot de passe !** Cet exercice est simplement lÃ  pour vous montrer qu'il est possible d'accÃ©der aux disques de l'Ã©cole depuis Linux avec un simple script. (la preuve moi-mÃªme je l'ai fait sur mon pc perso)
> En thÃ©orie, il est tout Ã  fait possible de mettre son username + mot de passe dans un tel fichier **sur un ordinateur personnel**. Comme on est Ã  l'Ã©cole devant tout le monde, n'Ã©crivez-pas bÃªtement votre mot de passe en claire devant tout le monde...


#### Ã‰tape 4
Pour empÃªcher quiconque de pouvoir accÃ©der Ã  votre nom d'utilisateur et mot de passe (que vous n'avez pas Ã©crit j'espÃ¨re !!), exÃ©cutez dans le fichier `~/ceff` les commandes suivantes :
```shell
sudo chown root credentials.cifs
sudo chmod 600 credentials.cifs
```

> ğŸ’¡ Le `chown` permet de dÃ©finir l'utilisateur `root` en tant que propriÃ©taire du fichier. (CHange OWNer).
> Le chmod permet de dÃ©finir que seul l'utilisateur `root` peut lire / Ã©crire dans ce fichier.


#### Ã‰tape 5
Montez les disques avec la commande `sudo sh ~/ceff/mount.sh` exÃ©cutant le script prÃ©cÃ©demment Ã©crit.

> â¡ï¸ Durant cette Ã©tape, vous devrez donc entrer le mot de passe de votre utilisateur Ubuntu (Ã  cause du "sudo"), puis votre mot de passe du CEFF pour pouvoir accÃ©der Ã  vos disques sur le rÃ©seau.
> Si vous aviez enregistrÃ© votre mot de passe du CEFF dans le fichier "credentials.cifs", vous n'auriez bien entendu pas besoin de le re-entrer ici. Mais comme vous n'Ãªtes pas bÃªtes, vous ne l'avez pas fait :)


#### Ã‰tape 6
Vous pouvez vous rendre dans les dossiers prÃ©cÃ©demment crÃ©Ã©s pour vÃ©rifier que vous avez accÃ¨s Ã  vos disques de l'Ã©cole depuis votre macine virtuelle :)


#### Ã‰tape 7 -- NE PAS FAIRE !!
N'oubliez pas de remettre votre machine virtuelle en mode **Bridged**, puis redÃ©marrez-la en tapant la commande `reboot`.

---


`bonus !`
## ğŸ Exercice 3 - Un peu plus avancÃ©
Voici une commande Ã  exÃ©cuter dans un terminal :

```sh
curl -s 'https://i.imgur.com/AzwwrS1.jpeg' -o - | tesseract stdin stdout | grep --color 609
```

Expliquez dans un petit document ce que fait cette commande, ce que reprÃ©sente son rÃ©sultat et comment elle fonctionne.

---

`bonus !`
## ğŸ Exercice 4 - encore un bonus
Installez le paquet `sl`, dÃ©couvrez ce qu'il fait et amusez-vous avec ses paramÃ¨tres.  
Utilisez la commande `man` pour vous informer sur ce paquet.